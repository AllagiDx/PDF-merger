<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Split</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="pdf-split-container">
      <!-- Upload Stage -->
      <div id="uploadStage" class="stage active">
        <div class="upload-header">
          <button class="back-btn" id="backToHome">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            <span id="backText">戻る</span>
          </button>
          <h1 id="uploadTitle">PDF分割</h1>
        </div>

        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">
            <svg
              width="80"
              height="80"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path
                d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"
              />
            </svg>
          </div>
          <h2 id="uploadPrompt">PDFファイルをドラッグ&ドロップ</h2>
          <p id="uploadSubtext">または</p>
          <button class="upload-btn" id="selectFileBtn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"
              />
            </svg>
            <span id="selectBtnText">ファイルを選択</span>
          </button>
          <input
            type="file"
            id="pdfFileInput"
            accept=".pdf"
            style="display: none"
          />
          <p class="upload-hint" id="uploadHint">1つのPDFファイルを選択</p>
        </div>
      </div>

      <!-- Split Stage -->
      <div id="splitStage" class="stage">
        <div class="split-header">
          <button class="back-btn" id="backToUpload">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            <span id="backSplitText">戻る</span>
          </button>
          <h1 id="splitTitle">PDF分割</h1>
        </div>

        <div class="split-layout">
          <!-- Left: Control Panel -->
          <div class="control-panel">
            <button class="control-btn add-btn" id="addMoreBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M12 5v14M5 12h14" />
              </svg>
              <span id="addMoreText">別のPDF</span>
            </button>

            <button class="control-btn reset-btn" id="resetAllBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" />
                <path d="M21 3v5h-5" />
              </svg>
              <span id="resetAllText">リセット</span>
            </button>

            <div class="info-box" id="fileInfo">
              <div class="info-row">
                <span id="infoLabel">総ページ数:</span>
                <span id="totalPagesInfo">0</span>
              </div>
              <div class="info-row">
                <span id="sizeLabel">ファイルサイズ:</span>
                <span id="fileSizeInfo">0 MB</span>
              </div>
            </div>

            <!-- Mode Selection -->
            <div class="selection-section" id="modeSection">
              <h3 id="modeTitle">分割モード</h3>
              <div class="selection-buttons">
                <button
                  class="selection-btn active"
                  id="customModeBtn"
                  data-mode="custom"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 2v20M2 12h20" />
                  </svg>
                  <span id="customModeText">カスタム範囲</span>
                </button>
                <button
                  class="selection-btn"
                  id="fixedModeBtn"
                  data-mode="fixed"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect x="3" y="3" width="7" height="7" rx="1" />
                    <rect x="14" y="3" width="7" height="7" rx="1" />
                    <rect x="3" y="14" width="7" height="7" rx="1" />
                    <rect x="14" y="14" width="7" height="7" rx="1" />
                  </svg>
                  <span id="fixedModeText">固定範囲</span>
                </button>
              </div>
            </div>

            <!-- Custom Range Settings -->
            <div id="customRangeSettings" class="range-settings active">
              <div id="rangesList" class="ranges-list">
                <!-- Ranges will be dynamically added -->
              </div>
              <button class="add-range-btn" id="addRangeBtn">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M12 5v14M5 12h14" />
                </svg>
                <span id="addRangeText">範囲を追加</span>
              </button>
              <div class="help-text" id="customHelpText">
                複数の範囲を追加できます。重複しない範囲を指定してください。
              </div>
            </div>

            <!-- Fixed Range Settings -->
            <div id="fixedRangeSettings" class="range-settings">
              <div class="setting-group">
                <label id="pagesPerSplitLabel">ページ数ごとに分割</label>
                <input
                  type="number"
                  id="pagesPerSplit"
                  class="page-input"
                  min="1"
                  value="4"
                  placeholder="4"
                />
              </div>
              <div class="help-text" id="fixedHelpText">
                指定したページ数ごとにファイルを分割します
              </div>
            </div>

            <button class="save-btn" id="executeSplitBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"
                />
              </svg>
              <span id="saveSplitText">分割したPDFを保存</span>
            </button>
          </div>

          <!-- Right: Preview Area -->
          <div class="preview-area">
            <!-- Split Preview Panel -->
            <div id="splitPreviewPanel" class="split-preview-display">
              <div class="preview-header">
                <h3 id="previewTitle">分割プレビュー</h3>
                <div class="preview-stats" id="previewStats">
                  <span id="totalFilesInfo">0 ファイル</span>
                  <span class="divider">•</span>
                  <span id="totalSplitPagesInfo">0 ページ</span>
                </div>
              </div>
              <div class="preview-grid" id="previewContent">
                <!-- Preview items will be rendered here -->
              </div>
            </div>

            <!-- PDF Thumbnails (shown for small PDFs) -->
            <div class="pdf-grid" id="pdfGrid">
              <!-- PDF thumbnails will be rendered here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Success Modal -->
      <div class="success-modal" id="successModal">
        <div class="success-content">
          <div class="success-icon">
            <svg
              width="80"
              height="80"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
              <path d="M22 4L12 14.01l-3-3" />
            </svg>
          </div>
          <h2 id="successTitle">保存完了!</h2>
          <p id="successMessage">PDFファイルが分割・保存されました</p>
          <div class="success-path" id="successPath"></div>
          <div class="success-actions">
            <button class="success-btn primary" id="splitMoreBtn">
              <span id="splitMoreText">もっと分割</span>
            </button>
            <button class="success-btn secondary" id="goHomeBtn">
              <span id="goHomeText">ホームに戻る</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

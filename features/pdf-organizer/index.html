<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDFページ整理</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="pdf-organizer-container">
      <!-- ========== STAGE 1: UPLOAD ========== -->
      <div id="uploadStage" class="stage active">
        <div class="upload-header">
          <button class="back-btn" id="backToHome">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            <span id="backText">戻る</span>
          </button>
          <h1 id="uploadTitle">PDFページ整理</h1>
        </div>

        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">
            <svg
              width="80"
              height="80"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path
                d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"
              />
            </svg>
          </div>
          <h2 id="uploadPrompt">PDFファイルをドラッグ&ドロップ</h2>
          <p id="uploadSubtext">または</p>
          <button class="upload-btn" id="selectFileBtn">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"
              />
            </svg>
            <span id="selectBtnText">ファイルを選択</span>
          </button>
          <input
            type="file"
            id="pdfFileInput"
            accept=".pdf"
            style="display: none"
          />
          <p class="upload-hint" id="uploadHint">
            PDFファイルを選択してページを整理
          </p>
        </div>
      </div>

      <!-- ========== STAGE 2: ORGANIZE ========== -->
      <div id="organizeStage" class="stage">
        <div class="organize-header">
          <button class="back-btn" id="backToUpload">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            <span id="backOrganizeText">戻る</span>
          </button>
          <h1 id="organizeTitle">ページを整理</h1>
        </div>

        <div class="organize-layout">
          <!-- Left: Control Panel -->
          <div class="control-panel">
            <!-- File Info Section -->
            <div class="control-section">
              <h3 id="fileInfoTitle">ファイル情報</h3>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label" id="totalPagesLabel"
                    >総ページ数:</span
                  >
                  <span class="info-value" id="totalPages">0</span>
                </div>
                <div class="info-item">
                  <span class="info-label" id="fileSizeLabel"
                    >ファイルサイズ:</span
                  >
                  <span class="info-value" id="fileInfoSize">0 MB</span>
                </div>
              </div>
            </div>

            <!-- Sort Section -->
            <div class="control-section">
              <h3 id="sortTitle">並び替え</h3>
              <div class="sort-buttons">
                <button class="control-btn" id="sortAscBtn">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 5v14M5 12l7-7 7 7" />
                  </svg>
                  <span id="sortAscText">昇順</span>
                </button>
                <button class="control-btn" id="sortDescBtn">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 19V5M5 12l7 7 7-7" />
                  </svg>
                  <span id="sortDescText">降順</span>
                </button>
                <button class="control-btn" id="resetOrderBtn">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"
                    />
                    <path
                      d="M21 3v5h-5M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"
                    />
                    <path d="M3 21v-5h5" />
                  </svg>
                  <span id="resetOrderText">リセット</span>
                </button>
              </div>
            </div>

            <!-- Actions Section -->
            <div class="control-section">
              <h3 id="actionsTitle">アクション</h3>
              <div class="action-buttons">
                <button class="control-btn add-btn" id="addMoreBtn">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 5v14M5 12h14" />
                  </svg>
                  <span id="addMoreText">ファイルを追加</span>
                </button>
                <button class="control-btn danger-btn" id="clearAllBtn">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"
                    />
                  </svg>
                  <span id="clearAllText">全削除</span>
                </button>
              </div>
            </div>

            <!-- Info Box -->
            <div class="info-box">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <path d="M12 16v-4M12 8h.01" />
              </svg>
              <span id="hoverInfoText"
                >ページにカーソルを合わせて挿入ボタンを表示</span
              >
            </div>

            <!-- Save Button -->
            <button class="save-btn" id="savePdfBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"
                />
              </svg>
              <span id="savePdfText">PDFを保存</span>
            </button>
          </div>

          <!-- Right: Pages Grid -->
          <div class="pdf-grid-container">
            <div class="pdf-grid" id="pagesGrid">
              <!-- Pages will be rendered here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Hidden File Inputs -->
      <input
        type="file"
        id="addMoreFileInput"
        accept=".pdf,.png,.jpg,.jpeg"
        multiple
        style="display: none"
      />
      <input
        type="file"
        id="insertFileInput"
        accept=".pdf,.png,.jpg,.jpeg"
        multiple
        style="display: none"
      />

      <!-- ========== INSERT MODAL ========== -->
      <div id="insertModal" class="insert-modal" style="display: none">
        <div class="insert-modal-content">
          <h3 class="insert-modal-title" id="insertModalTitle">
            挿入オプション
          </h3>
          <div class="insert-modal-buttons">
            <button class="btn insert-option-btn" id="insertFileBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"
                />
                <polyline points="13 2 13 9 20 9" />
              </svg>
              <span id="insertFileBtnText">ファイルを挿入</span>
            </button>
            <button class="btn insert-option-btn" id="insertBlankBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                <line x1="12" y1="8" x2="12" y2="16" />
                <line x1="8" y1="12" x2="16" y2="12" />
              </svg>
              <span id="insertBlankBtnText">白紙ページを挿入</span>
            </button>
          </div>
          <button
            class="btn small"
            id="cancelInsertBtn"
            style="margin-top: 12px"
          >
            <span id="cancelInsertText">キャンセル</span>
          </button>
        </div>
      </div>

      <!-- ========== SUCCESS MODAL ========== -->
      <div class="success-modal" id="successModal">
        <div class="success-content">
          <div class="success-icon">
            <svg
              width="80"
              height="80"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
              <path d="M22 4L12 14.01l-3-3" />
            </svg>
          </div>
          <h2 id="successTitle">保存完了!</h2>
          <p id="successMessage">PDFファイルが整理・保存されました</p>
          <div class="success-path" id="successPath"></div>
          <div class="success-actions">
            <button class="success-btn primary" id="organizeMoreBtn">
              <span id="organizeMoreText">もっと整理</span>
            </button>
            <button class="success-btn secondary" id="goHomeBtn">
              <span id="goHomeText">ホームに戻る</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="feature.js"></script>
  </body>
</html>
